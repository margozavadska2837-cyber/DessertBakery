
# 0002: Шарова Архітектура (Layered Architecture)

## 1. Обрана Структура Шарів

Для організації бізнес-логіки та відділення її від транспорту/даних ми використовуємо три основні шари (папки) з наступними обов'язками:

1.  **`api/`** (Контролери/Роути):
    * Приймають HTTP-запит.
    * Виконують початкове перетворення запиту в DTO для внутрішнього використання.
    * Викликають логіку з шару `service/`.
    * Формують фінальну HTTP-відповідь згідно з контрактом API.
2.  **`service/`** (Use Cases / Бізнес-логіка):
    * Містить основну бізнес-логіку та логіку валідації.
    * Виконує операції, мапінг DTO ↔ Domain.
    * **Вся основна логіка проєкту знаходиться тут.**
3.  **`domain/`** (Сутності та Інваріанти):
    * Містить визначення основних сутностей проєкту (наприклад, `Dessert`).
    * Містить правила та обмеження, які завжди застосовуються до цих сутностей.

## 2. Правила Залежностей

Для забезпечення чистоти архітектури ми встановлюємо суворі правила залежностей:

* **Напрямок залежностей (Зверху Вниз):** Шари можуть залежати лише від шарів, що знаходяться нижче.
    * `api/` **залежить** від `service/`.
    * `service/` **залежить** від `domain/`.
    * `domain/` **не залежить** від жодного іншого шару.
* **Заборонені Зв'язки:**
    * **`api/` не повинен напряму звертатися до Бази Даних (БД).** Усі операції з даними мають виконуватися лише через `service/` шар.

---

## 3. Фіналізація та Завантаження

Тепер, коли ви оновили `openapi.yaml` та створили файл `0002-layered-architecture.md`, вам потрібно завантажити всі зміни на GitHub:

1.  **Додайте файли:**
    ```bash
    git add docs/api/openapi.yaml docs/adr/0002-layered-architecture.md
    ```
2.  **Зафіксуйте зміни:**
    ```bash
    git commit -m "feat(arch): Додано ендпоінт /health та правила шарової архітектури"
    ```
3.  **Відправте на GitHub:**
    ```bash
    git push
    ```

Ці кроки повністю завершують реалізацію пунктів 3 та 4.
